<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>新闻列表页</title>
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
        crossorigin="anonymous">
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
   <!--  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script> --> 
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .list {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 0;
        }

        .list li {
            border: 1px solid seashell;
        }

        .list img {
            width: 400px;
            height: 400px;
        }

        .foot {
            margin: 0 auto;
            background-color: rgb(245, 241, 241);
            width: 100%;
            height: auto;
        }

        .foot .thumbnail {
            background-color: rgb(245, 241, 241);
            border: rgb(245, 241, 241);
        }
        .scroll-con {

overflow-y: auto;
overflow-x: hidden;
}

.scroll-con-img {

opacity: 0;
transform: translateX(50%);
transition: all 1s;
}

.fade {
transform: translateX(0);
opacity: 1;
transition: all 1s;
}
.fade:not(.show) {
opacity: 1;
}
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
          <a href=""><img src="6-4.png" alt=""height="80px"width="80px"></a>
          <a class="navbar-brand" href="#">旅游网</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button> 
          <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="work6.html" style="font-size: 18px;"tabindex="-1" aria-disabled="true">主页&nbsp;&nbsp;&nbsp;</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="new.html"style="font-size: 18px;"tabindex="-1" aria-disabled="true">新闻&nbsp;&nbsp;&nbsp;</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active " href="work7.html" tabindex="-1" aria-disabled="true"style="font-size: 18px;">展示页&nbsp;&nbsp;&nbsp;</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="aboutme.html" tabindex="-1" aria-disabled="true"style="font-size: 18px;">关于我们&nbsp;&nbsp;&nbsp;</a>
              </li>
            </ul>
      
          </div>
        </div>
      </nav>
    <div class="container">
        <div>
            <ul class="list">

            </ul>
        </div>
    </div>
    <!-- 分页 -->
    <div style="text-align: center;">
        <ul class="pagination">
            <li onclick="pre()"><a href="#">&laquo;</a></li>
            <li onclick="getUrl(1)"><a href="#">1</a></li>
            <li onclick="getUrl(2)"><a href="#">2</a></li>
            <li onclick="getUrl(3)"><a href="#">3</a></li>
            <li onclick="next()">
                <a href="#" aria-label="Next">
                    <span aria-hidden="true">
                        &raquo;
                    </span>
                </a>
            </li>

        </ul>
    </div>
    <script>
        let current = Number(window.location.href.split("?page=")[1]) || 1;
        function pre() {
            if (current > 1) {
                getUrl(current - 1);
            }
        }
        function next() {
            if (current < 3) {
                getUrl(current + 1);
            }
        }
        function getUrl(page) {
            window.location.href = `?page=${page}`
        }

        page(current);
        function page(page) {
            current = page;
            $('.list').empty();
            axios.get(`https://www.fastmock.site/mock/0c92fcc77079c0922f43d594b8fca3e1/yxm/api?page=${page}`).then(function (res) {
                console.log(res.data.data, res.data.data.list);
                for (let i = 0; i < res.data.data.list.length; i++) {
                    console.log(res.data);
                    let li = $('<li></li>');
                    li.append(`<img width='500px' height='300px' src=${res.data.data.list[i].img}>`);
                    li.append(`<h3 style="text-align:center;">${res.data.data.list[i].title}</h3>`)
                    li.append(`<span style="margin-left:170px;">${res.data.data.list[i].time}</span>`)
                    li.attr('id', res.data.data.list[i].id);
                    $('.list').append(li);
                }
                $('.list li').click(function () {
                    window.location.href = `detail.html?id=${$(this).attr('id')}`

                })
            })
        }
    </script>
    <div class="row">
        <div class="foot">
            <div class="container">
                <div class="col-xs-12 col-md-6 col-sm-12 col-lg-3 col-xl-3">
                    <a href="#" class="thumbnail">
                        <img class="scroll-con-img"  data-src="6-16.png" alt="..." style="width: 150px;height: 150px;">
                    </a>
                    <h4 style="text-align: center;">福州市仓山区万达广场A区</h4>
                </div>
                <div class="col-xs-12 col-md-6 col-sm-12 col-lg-3 col-xl-3">
                    <a href="#" class="thumbnail">
                        <img class="scroll-con-img"  data-src="6-15.png" alt="..." style="width: 150px;height: 150px;">
                    </a>
                    <h4 style="text-align: center;">1054372808@qq.com</h4>
                </div>
                <div class="col-xs-12 col-md-6 col-sm-12 col-lg-3 col-xl-3">
                    <a href="#" class="thumbnail">
                        <img  class="scroll-con-img" data-src="6-7.png" alt="..." style="width: 150px;height: 150px;">
                    </a>
                    <h4 style="text-align: center;">客服中心:400-123-456</h4>
                </div>
                <div class="col-xs-12 col-md-6 col-sm-12 col-lg-3 col-xl-3">
                    <a href="#" class="thumbnail">
                        <img class="scroll-con-img"  data-src="6-14.png" alt="..." style="width: 250px;height: 250px;">
                    </a>
                    <h4 style="text-align: center;">扫码加入旅游团！</h4>
                </div>
                <br>
                <div style="width: 100%;height: 3px;background-color: black;clear: both;"></div>
                <div style="text-align: center;">
                    <p>版权所有@yxm</p>
                </div>
            </div>
        </div>
    </div>
      <!--懒加载-->
   <script>
    const con = document.querySelector('.scroll-con')
    const imgs = document.querySelectorAll('.scroll-con-img')
    function lazyLoad(target) {
        const io = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target
                    const src = img.getAttribute('data-src')
                    img.setAttribute('src', src)
                    img.classList.add('fade')
                    observer.disconnect()
                }
            })
        }, {
            root: con,
            threshold: 1,
            rootMargin: '0px'
        })
        io.observe(target)
    }
    imgs.forEach(lazyLoad)
</script>
</body>

</html>